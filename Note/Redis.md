# 数据类型及常用命名

# 与Memcached的区别

* Redis支持存储多种数据类型：string、list、hash、set、zset；而Memcached只支持string

* Redis支持持久化：RDB快照和AOF日志；Memcached不支持持久化

* Redis支持事务，使用MULTI 和 EXEC命令，支持流水线式发送命令 ；Memcahced不支持事务，命令只能一条一条的发

* Redis-Cluster 支持分布式存储，可以多台Redis服务器存储同样的数据；Memcached是以**一致性哈希算法**实现分布式存储，即多台Memcached服务器，Memcached根据查找的key计算出该数据在哪台服务器上

* 在 Redis 中，并不是所有数据都一直存储在内存中，可以将一些很久没用的 value 交换到磁盘； 

  Memcached 的数据则会一直在内存中，Memcached使用固定空间分配，将内存分为一组大小不同的slab_class，每个slab_class又分为一组大小相同的slab，每个slab又包含一组大小相同的chunk，根据数据大小，放到不同的chunk里，这种管理方式避免内存碎片管理问题，但是会带来内存浪费，即每个chunk内会放小于这个chunk大小的数据，chunk里有些空间没利用到

# 过期时间和数据淘汰策略

# 持久化

# 事务

# 缓存可能引发的问题以及应对方法

## 缓存雪崩

缓存大面积失效导致请求到达数据库

应对方法：

1. 缓存过期时间设置均匀，不能让一大片缓存在某一时间全部失效
2. 请求时加锁，后续请求只能等到前面的查完数据库，进行缓存后，才能继续，但会造成吞吐量降低，响应时间变长

## 缓存穿透

查询一个一定不存在的数据，导致请求一直到达数据库

应对方法：

1. 将可能出现查询的值哈希到一个bitMap中，使用布隆过滤进行拦截
2. 如果查询结果为空，也加入缓存中，每次查询返回空，设置过期时间

